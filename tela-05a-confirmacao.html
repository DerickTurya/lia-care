<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Licen√ßa Cadastrada - Lia Care</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="js/lia-sync.js"></script>
</head>
<body>
    <div class="header">
        <div class="header-content">
            <div class="logo">
                <div class="logo-icon">LIA</div>
                <div class="logo-text">
                    <h1>Lia Care</h1>
                    <p>Licen√ßas e Afastamentos</p>
                </div>
            </div>
            <div class="user-info">
                <span>Colaborador</span>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="card text-center" style="max-width: 600px; margin: 40px auto;">
            <div style="font-size: 64px; margin-bottom: 24px;">‚úÖ</div>
            
            <div class="card-header">
                <h2 class="card-title">Licen√ßa cadastrada com sucesso!</h2>
                <p class="card-subtitle">Seus documentos foram recebidos e processados</p>
            </div>

            <div class="divider"></div>

            <div style="text-align: left;">
                <h3 style="font-size: 16px; font-weight: 600; margin-bottom: 16px;">Status do processo:</h3>
                
                <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
                    <span style="color: var(--success-color); font-size: 20px;">‚úì</span>
                    <div>
                        <div style="font-weight: 500;">Licen√ßa cadastrada</div>
                        <div style="font-size: 13px; color: var(--text-gray);">Documentos validados</div>
                    </div>
                </div>

                <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
                    <span style="color: var(--success-color); font-size: 20px;">‚úì</span>
                    <div>
                        <div style="font-weight: 500;">Gestor notificado</div>
                        <div style="font-size: 13px; color: var(--text-gray);">Notifica√ß√£o enviada automaticamente</div>
                    </div>
                </div>

                <div style="display: flex; align-items: center; gap: 12px;">
                    <span style="color: var(--success-color); font-size: 20px;">‚úì</span>
                    <div>
                        <div style="font-weight: 500;">DUT gerada</div>
                        <div style="font-size: 13px; color: var(--text-gray);">Declara√ß√£o √önica de Trabalho dispon√≠vel</div>
                    </div>
                </div>
            </div>

            <div class="ai-message mt-3">
                <div class="ai-message-header">
                    <span>ü§ñ</span>
                    <span>LIA - Assistente Inteligente</span>
                </div>
                <div class="ai-message-content">
                    <p style="margin-bottom: 16px; font-size: 17px;"><strong>Tudo certo! ‚ú®</strong></p>
                    <p style="margin-bottom: 12px;">Acabei de processar seu atestado. Olha o que rolou:</p>
                    <ul style="margin: 12px 0; padding-left: 20px; line-height: 2;">
                        <li>‚úÖ <strong>Atestado validado</strong> (conferi tudo: per√≠odo, CID, assinatura)</li>
                        <li>‚úÖ <strong>DUT gerada</strong> automaticamente</li>
                        <li>‚úÖ <strong>Gestor notificado</strong> por e-mail e sistema</li>
                        <li>‚úÖ <strong>RH informado</strong> para processar o afastamento</li>
                    </ul>
                    <p style="margin-top: 16px;"><strong>‚è±Ô∏è Prazo:</strong> Tudo aparece no sistema em at√© <strong>6 dias √∫teis</strong>.</p>
                    <p style="margin-top: 16px; font-size: 16px;"><strong>Agora √© s√≥ focar na sua recupera√ß√£o!</strong> üíô<br>Vou monitorar tudo e te aviso se precisar de algo. Fique tranquilo(a)! üòä</p>
                </div>
            </div>

            <div style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); padding: 20px; border-radius: 12px; margin-top: 24px; color: white; text-align: center;">
                <div style="font-size: 36px; margin-bottom: 12px;">üè•</div>
                <h3 style="margin: 0 0 8px 0; font-size: 18px;">Quer dicas para sua recupera√ß√£o?</h3>
                <p style="margin: 0 0 16px 0; opacity: 0.9; font-size: 14px;">
                    Nossa IA pode te orientar sobre exerc√≠cios, alimenta√ß√£o e cuidados personalizados
                </p>
                <a href="tela-dicas-saude.html" class="btn" style="background-color: white; color: #059669; border: none;">
                    ü§ñ Receber Dicas com IA
                </a>
            </div>

            <div style="margin-top: 32px;">
                <a href="tela-06a-acompanhamento.html" class="btn btn-primary btn-block">
                    Acompanhar minha licen√ßa
                </a>
                
                <a href="tela-01-entrada.html" class="btn btn-secondary btn-block">
                    Voltar ao in√≠cio
                </a>
            </div>
        </div>
    </div>

    <script>
        // Cadastra a licen√ßa automaticamente ao carregar a p√°gina
        window.addEventListener('DOMContentLoaded', () => {
            // Verificar se j√° foi criada (evitar duplicatas ao recarregar)
            const alreadyCreated = sessionStorage.getItem('license-created-joao-silva');
            if (alreadyCreated) {
                console.log('‚úÖ Licen√ßa j√° foi cadastrada nesta sess√£o');
                return;
            }
            
            // Dados simulados do colaborador (em produ√ß√£o viriam do formul√°rio anterior)
            const licenseData = {
                employeeName: 'Jo√£o Silva',
                employeeId: 'COL-12345',
                position: 'Desenvolvedor Frontend',
                department: 'Tecnologia',
                manager: 'Maria Santos',
                cid: 'M54.5',
                condition: 'Lombalgia',
                days: 15,
                startDate: new Date().toLocaleDateString('pt-BR'),
                endDate: new Date(Date.now() + 15 * 24 * 60 * 60 * 1000).toLocaleDateString('pt-BR'),
                doctorName: 'Dr. Carlos Mendes',
                doctorCRM: 'CRM 12345-SP'
            };

            // Cadastra no sistema e notifica gestor
            const license = window.liaSync.createLicense(licenseData);
            sessionStorage.setItem('license-created-joao-silva', 'true');
            
            console.log('‚úÖ Licen√ßa cadastrada:', license);
            console.log('üìß Gestor notificado automaticamente!');
            
            // Mostra feedback visual
            setTimeout(() => {
                const stats = window.liaSync.getStats();
                console.log('üìä Estat√≠sticas atualizadas:', stats);
            }, 500);
        });
    </script>
</body>
</html>
